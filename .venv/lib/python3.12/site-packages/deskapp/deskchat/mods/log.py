from typing import Any, List, Tuple

NAME = 'Log'


def init(app: Any):
    app.data.setdefault('chat', [])


def draw(app: Any, win, h: int, w: int):
    logs: List[Tuple[str, str]] = app.data.get('chat', [])
    y = 1
    for user, text in logs[-(h - 3):]:
        if y >= h - 2:
            break
        line = f"{user}: {text}"
        if len(line) > w - 4:
            line = line[: w - 7] + '...'
        win.addstr(y, 2, line)
        y += 1
